<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>用户主目录的使用及我的文档管理习惯</title>
<!-- 2013-10-22 二 18:24 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="心蛛" />
<meta  name="description" content="Level-3 for exporting to HTML"
 />
<link rel="stylesheet" title="Standard" href="../../../assets/css/worg.css" type="text/css" />
<link rel="alternate stylesheet" title="Zenburn" href="../../../assets/css/worg-zenburn.css" type="text/css" />
<link rel="alternate stylesheet" title="Classic" href="../../../assets/css/worg-classic.css" type="text/css" />

<script type="text/javascript" src="http://orgmode.org/org-info.js">
/**
 *
 * @source: http://orgmode.org/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in http://orgmode.org/org-info.js.
 *
 * Copyright (C) 2012-2013  Sebastian Rose
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in http://orgmode.org/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "../../../index.html");
org_html_manager.set("LINK_UP", "../../index.html");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "content");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../../index.html"> UP </a>
 |
 <a accesskey="H" href="../../../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">用户主目录的使用及我的文档管理习惯</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">原则一：尽可能遵守操作系统默认的目录设置习惯</a>
<ul>
<li><a href="#sec-1-1">Mac OS X 的用户功能目录</a></li>
<li><a href="#sec-1-2">MS Windows 的用户功能目录</a></li>
<li><a href="#sec-1-3">Linux 下的用户目录设置</a></li>
</ul>
</li>
<li><a href="#sec-2">原则二：要养成自己的资料管理约定</a></li>
<li><a href="#sec-3">小结</a></li>
</ul>
</div>
</div>
<p>
做研究工作，需要查阅的资料通常很多：论文、手册、设计图纸、程序源代码、数据、图表，等等。比如我的硬盘中有近百 GiB 的这类资料，这其中还不包括实验的原始数据（有些实验光原始数据就在数百 GiB 的量级）。通常还会有一点电子图书、音乐、视频、照片等生活或学习资料。当资料很多时，如果随便散乱在你的硬盘中，在寻找时就会很麻烦，因此需要一点文档管理的约定。
</p>

<p>
在此介绍一下个人基于层次文件系统的一些资料管理习惯。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">原则一：尽可能遵守操作系统默认的目录设置习惯</h2>
<div class="outline-text-2" id="text-1">
<p>
不同的操作系统会默认在用户主目录下创建一些子目录（且称之为“功能目录”）。很多人喜欢更改这些功能目录的名称，或者删掉认为无用的。这样的习惯不好，因为应用程序会默认寻找这些目录。建议不要随便更名或删除，应保持其默认值。
</p>

<p>
对于用户，学会使用这些功能目录，会养成了你资料分类的好习惯。
</p>

<p>
对于程序员，你应该熟悉那些系统默认的功能目录，这会让你的程序不那么令人讨厌。例如一些国产软件，它们会强制在不该出现的地方建立一个自己的目录用于存放数据，对于这类玩意，我的第一反应就是离得越远越好。
</p>

<p>
分别介绍三种流行的操作系统下用户的功能目录设置习惯。
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Mac OS X 的用户功能目录</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Mac OS X 默认会创建如下功能目录:
</p>
<ul class="org-ul">
<li><code>Desktop</code> &#x2013; 即用户的“桌面”
</li>
<li><code>Documents</code> &#x2013; “文档”
</li>
<li><code>Library</code> &#x2013; 用于保存用户的各种数据及系统相关的信息，比如地址簿、邮件、收藏夹、各种配置文件，等等
</li>
<li><code>Movies</code> &#x2013; “视频”
</li>
<li><code>Music</code> &#x2013; “音乐”
</li>
<li><code>Pictures</code> &#x2013; “图片”，包括照片等
</li>
<li><code>Public</code> &#x2013; 与其他用户共享的目录
</li>
<li><code>Sites</code> &#x2013; 保存用于共享的网页等
</li>
</ul>

<p>
这些功能目录实际均以英文命名，但用 <code>Finder</code> 打开时，系统会根据用户的语言环境自动进行翻译。这些翻译保存在系统核心服务中，比如简体中文环境的系统目录别名保存在：
</p>
<pre class="example">
/System/Library/CoreServices/SystemFolderLocalizations/zh_cn.lproj/SystemFolderLocalizations.strings
</pre>
<p>
（注：上述的文件以 UTF-16 编码保存，普通用户并没有修改的权限，也不建议你这么改，因为会很危险。）
</p>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">MS Windows 的用户功能目录</h3>
<div class="outline-text-3" id="text-1-2">
<p>
微软从 Windows 95 开始才引入“用户配置文件”的概念，直到 Windows 2000 才算基本完善其功能。
</p>

<blockquote>
<p>
说点无关话题：在中国，绝大部分 Windows 用户实际上并没有“用户”概念，无论是 XP 还是 Windows 7, 通常都用 Administrator 帐户登陆，随心所欲地更改系统。而大部分的国产软件也没有将“用户／帐号”这个概念当回事，随便一点小事都申请用管理员权限处理，这又强化了大多数人认为“不是管理员就无法用计算机”的意识。这种恶习也导致国内大部分计算机的安全设置在默认情况下十分恶劣。这种恶劣的习惯也是国产流氓软件生存的土壤。
</p>
</blockquote>

<p>
在 Windows 2000/XP 下，用户的主目录由环境变量 <code>HOMEPATH</code> 表示，其值通常为
</p>
<pre class="example">
%SystemDrive%\Documents and Settings\%USERNAME%\
</pre>
<p>
这儿的环境变量 <code>SystemDrive</code> 默认是 <code>C:</code>. 在 Windows Vista/7/8 下面，则变为：
</p>
<pre class="example">
%SystemDrive%\Users\%USERNAME%\
</pre>
<p>
可能是微软也觉得 <code>Documents and Settings</code> 这样的名称实在有些烦琐了。
</p>

<p>
系统默认将用户的数据文件都放置在其主目录下，一些关键的程序数据是隐藏起来的。在
XP 以前通常可见的只有“我的文档”，其使用也非常频繁， 几乎每个程序都要在其中建立一个子目录，以彰显自己的控制权。
</p>

<p>
在 Vista 以后，多了几个与 Mac OS X 下类似的功能目录：
</p>
<ul class="org-ul">
<li>Desktop
</li>
<li>Documents
</li>
<li>Contacts
</li>
<li>Downloads
</li>
<li>Favorites
</li>
<li>Links
</li>
<li>Music
</li>
<li>Pictures
</li>
<li>Videos
</li>
</ul>
<p>
其中 <code>Documents</code> 目录与 XP 下“我的文档”功能一样。其余的算是模仿 Mac OS X 的设置。不过，这个模仿可以有。系统也会根据用户的区域设置自动将这些目录名翻译成相应的语言，在简体中文下 <code>Documents</code> 还叫“我的文档”。这些功能目录下都有一个隐藏文件
<code>desktop.ini</code>, 用于保存相关的设置。
</p>

<p>
Windows Vista 还引入了“虚拟文件夹” (Windows 7 以后改名叫“库”)，可以把一组目录归到某个虚拟目录下。（实际上，这原本是要在 WinFS 中引入的语义目录，但 WinFS 不了了之了。）“虚拟文件夹”（或“库”）可以把一些逻辑上相关的资料包含在一起，习惯了也挺方便。可将 Vista 的“虚拟文件夹”或 Windows 7 的“库”当成另一种功能目录。
</p>

<p>
在 Windows Vista/7 下，用户主目录默认设置为 <code>C:\Users\&lt;用户名&gt;</code>, 而通常系统盘空间又比较小。因此，许多人就放弃使用默认的功能目录，而在其它盘下随意保存数据。即便有人使用这些功能目录，也需要一个个设置属性并移植到新位置，显得很麻烦。其实，可通过修改注册链表把用户主目录移植到其它盘下，相应的功能目录也自动移动了，此法最为方便。
</p>

<p>
<b>小技巧</b>: Windows Vista/7 下修改默认的用户主目录创建位置：
</p>
<ol class="org-ol">
<li>以管理员用户登陆，打开注册链接编辑器 (<code>regedit.exe</code>)
</li>
<li>定位到 <code>ProfileList</code> 项:
<pre class="example">
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList
</pre>
</li>
<li>修改 <code>REG_EXPAND_SZ</code> 类型的键 <code>ProfilesDirectory</code> (默认值为 <code>C:\Users</code>) 为你想要的值，比如 <code>D:\Users</code>
</li>
<li>创建新的帐号，比如 <code>new</code>
</li>
<li>退出管理员，用新帐号重新登陆，这时，系统就会自动将帐号主目录创建在
     <code>D:\Users\new</code> 下
</li>
</ol>

<p>
如果是一个已经存在的帐号 (如 <code>ali</code>)，也可以用管理员帐号先把用户数据移植到新目录下，然后在注册链表 <code>ProfileList\S-1-....</code> 项中寻找类型为 <code>REG_EXPAND_SZ</code> 的键
<code>ProfileImagePath</code> (若没有，就创建一个), 修改其值指向新的位置。但这样做有潜在的风险：可能有大量的程序已经把原来的用户主目录写入到了注册链表中，这样，你就需要手动修改许多程序配置。为防止意外，不妨把原来的目录 (如 <code>C:\Users\ali</code>) 删除，然后用命令 <code>mklink.exe</code> 把新位置链接到旧的目录处。
</p>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Linux 下的用户目录设置</h3>
<div class="outline-text-3" id="text-1-3">
<p>
在 Unix/Linux 下，比较流行的重量级桌面系统有 GNOME, KDE, XFce 等 (此处先忽略一下那些轻量级的 awesome, fvwm 等)。起初，不同的桌面系统对用户目录都有一套自己的习惯，这样会导致一种乱相，就是不同的应用程序往往会在用户目录下产生一堆各式各样的目录：隐藏／显示的、配置文件、数据文件、临时文件、缓冲数据，等等。这样，不仅目录显得杂乱，而且程序之间相互通讯有时也会很麻烦。而这样的问题其实很好解决，就是大家开发程序都遵守同样的目录使用约定。针对这类问题就产生了 <a href="http://http://www.freedesktop.org">FreeDesktop.org</a> 组织。
</p>

<p>
FreeDesktop.org 并非一个正式的标准化组织，尽管它比较松散，但一些工作内容却确实与标准化相关。其主要工作内容是定义一些 <a href="http://www.freedesktop.org/wiki/Desktops">X 桌面环境</a> 的 <a href="http://www.freedesktop.org/wiki/Specifications">规范</a>，包括基本目录设定、图标主题、缩略图、 MIME 类型、声音主题、文件管理的 D-Bus 接口、回收站配置，等等。
FreeDesktop.org 的一些工作令各种 X 桌面之间相互协调，用户体验更佳，比如：
</p>
<ul class="org-ul">
<li>在 Mac OS X 的终端里，你可以用命令 <code>open</code> 让系统调用默认的程序打开一些文档，在 Linux 的终端下你可以使用 <code>xdg-open</code>, 这个命令就是 FreeDesktop.org 的软件包
<code>xdg-utils</code> 中的工具之一。
</li>
<li>许多 Unix 程序默认在用户主目录下创建以 <code>.</code> 开头的隐藏文件用于保存用户配置。
FreeDesktop.org 定义了一个 <a href="http://www.freedesktop.org/wiki/Specifications/basedir-spec">basedir-spec</a> 规范，它规定：
<ul class="org-ul">
<li>程序应该将用户数据保存在 <code>$XDG_DATA_HOME</code> 定义的目录 (通常是
      <code>$HOME/.local/share</code>)
</li>
<li>用户的配置文件应该保存在 <code>$XDG_CONFIG_HOME</code> 定义的目录 (通常是
      <code>$HOME/.config</code>)
</li>
<li>程序的缓冲或临时数据应该保存在 <code>$XDG_CACHE_HOME</code> 定义的目录 (通常是
      <code>$HOME/.cache</code>)
</li>
</ul>
</li>
</ul>

<p>
用户功能目录的设置对应的 FreeDesktop.org 工具为 <a href="http://www.freedesktop.org/wiki/Software/xdg-user-dirs">xdg-user-dirs</a>, 它会在每个用户主目录下创建类似于 Mac OS X 下的用户功能目录 (如 <code>Desktop</code>, <code>Documents</code>,
<code>Templates</code>, <code>Downloads</code> 等), 并且这些目录名称会随着系统语言环境而被自动翻译，它们的使用与 Mac OS X 或 Windows Vista/7 下类似。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">原则二：要养成自己的资料管理约定</h2>
<div class="outline-text-2" id="text-2">
<p>
除了系统默认的功能目录下，我的用户主目录下通常还有这些子目录：
</p>
<ul class="org-ul">
<li><code>Documents/</code>  &#x2013; 文档
<ul class="org-ul">
<li><code>Draft/</code>  &#x2013; 草稿
</li>
<li><code>References/</code> &#x2013; 常用参考文献、手册等
</li>
</ul>
</li>
<li><code>Projects/</code> &#x2013; 项目内容
</li>
<li><code>Utilities/</code> &#x2013; 实用程序目录
</li>
<li><code>Workspace/</code> &#x2013; 程序开发目录
</li>
<li><code>Learn/</code> &#x2013; 学习资料
</li>
</ul>

<p>
在 <code>Projects/</code> 下，通常是每个项目一个子目录，包含与该项目相关的参考文献、程序、数据、会议报告，等等。一般目录名称用项目名称简写，比如 <code>NINT-MRPC</code> 表示与 NINT 单位合作的 <code>MRPC</code> 项目。常用的子目录有：
</p>
<ul class="org-ul">
<li><code>Attic/</code> &#x2013; 过期的或归档的项目资料，当一个项目完结时会移到这儿来
</li>
<li><code>Meetings/</code> &#x2013; 定期召开的会议资料
</li>
<li><code>EDU-ThesisDefence/</code> &#x2013; 研究生教育中论文答辩相关的资料
</li>
<li><code>Incubation/</code> &#x2013; 待孵化的项目
</li>
<li><code>Misc/</code> &#x2013; 未归类或临时的项目资料
</li>
</ul>

<p>
在实用程序目录 <code>Utilities</code> 下保存一些无须安装到系统路径下的程序，通常是一些自己编写的小程序，或者偶尔运行一次的程序，也包括一些测试程序和专业计算程序。这个目录采用 Unix 的目录惯例，包含有 <code>bin</code>, <code>lib</code>, <code>share</code> 等子目录。
</p>

<p>
由于我喜欢收集程序源代码，并且偶尔写一点小程序，就全放置在 <code>Workspace</code> 下了。这个目录采用层次结构，大致如下：
</p>
<ul class="org-ul">
<li><code>build</code> &#x2013; 用于编译他人的代码
</li>
<li><code>devel</code> &#x2013; 一些编程语言类的工具，如 Lua, Python 的小工具
</li>
<li><code>doc</code> &#x2013; 文档，如 <code>progit</code> 的本地 git 镜像
</li>
<li><code>test</code> &#x2013; 测试代码
</li>
</ul>
<p>
在 <code>Workspace</code> 下绝大部分目录都采用了 Git 或者 Mercurial (hg) 版本控制。由于收集的源代码比较多，挨个进行同步时会很麻烦，我编写了一个Python 脚本 <a href="https://github.com/exaos/el-scripts/blob/master/repos/repos-up.py">repos-up.py</a> 来管理 (还有一个 Lua 版本 <a href="https://github.com/exaos/el-scripts/blob/master/repos/repos-up.lua">repos-up.lua</a> 是我学习 Lua 时的练习题). 如 <code>doc/</code> 下有许多文档源码，把需要同步的源码目录填写在配置文件=repos.yaml= 中，当需要与互联网上的源同步时，一个命令即可：
</p>
<pre class="example">
repos-up.py ~/Workspace/doc/
</pre>
<p>
其中 <code>repos.yaml</code> 按 <a href="http://yaml.org/">YAML</a> 的格式，比如：
</p>
<pre class="example">
# mode: yaml; coding: utf-8

doc: |
  这是文档区，本文件的说明。
  这儿列出的是一些文档的仓库。

git:
  - gitbook
  - goldify
  - progit
  - tex/luaTeX-ja/luatexja
  - debian-handbook
  - cll

git_svn:
  - tex/ctex-kit
  - tex/pithesis

hg:
  - hgbook
  - python-peps
</pre>

<p>
目录 <code>Learn</code> 下保存一些学习资料，包括语言 (如英文听力)、专业图书等，不辍述。
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">小结</h2>
<div class="outline-text-2" id="text-3">
<p>
在“标签式文件系统”（或“语义文件系统”）等相关的工具还不成熟时，在现有的层次结构文件系统上养成良好的目录使用习惯，会对你的工作带来许多方便。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">

<script type="text/javascript" src="http://exaos.github.io/assets/js/pagetail.js"></script>
<div id="disqus_thread"></div>
<p>版权所有 ©2013: 心蛛 | Date: <span class="timestamp-wrapper"><span class="timestamp">[2013-02-06 三 01:41]</span></span> | Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.1), <a href="http://validator.w3.org/check?uri=referer">Validate</a>,
<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/"><img src="http://i.creativecommons.org/l/by-nc-sa/2.5/cn/88x31.png" alt="88x31.png"/></a>
<p><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></p>
</div>
</body>
</html>
